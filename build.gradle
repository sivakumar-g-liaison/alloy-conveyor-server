/*
 * Copyright 2013 Liaison Technologies
 *
 * A RESTful Cryptography Key Management system
 *
 */

// Establish version and status
ext.githubProjectName = rootProject.name // Change if github project name is not the same as the root project's name

buildscript {
	repositories {
        	mavenCentral() // maven { url 'http://jcenter.bintray.com' }
	}
	apply from: file('gradle/buildscript.gradle'), to: buildscript 
}

allprojects {
    group = 'com.liaison.template'
    repositories { 
        mavenCentral() // maven { url: 'http://jcenter.bintray.com' }

        maven { url releasesArtifactRepoURL }
        maven { url snapshotsArtifactRepoURL }
	maven { url thirdpartyArtifactRepoURL }
    }
    
    configurations {
        all {
            // check for updates every build
            resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
        }
    }    
}

apply from: file('gradle/convention.gradle')
apply from: file('gradle/maven.gradle')
apply from: file('gradle/check.gradle')
//apply from: file('gradle/license.gradle')
//apply from: file('gradle/release.gradle')

war {
	//a hack to take the empty war of project_root of the mix
	archiveName=".ignore_me_seriously_thanks"
}

subprojects {
    test {
        // workaround for Java7 and Cobutura/Emma instrumentation problem
        jvmArgs '-XX:-UseSplitVerifier'    
    }
}

project(':template-client') {
    apply plugin: 'java'
    dependencies {
        compile 'org.slf4j:slf4j-api:1.6.3'
        compile 'com.sun.jersey:jersey-client:1.11'
    }
}

project(':template-server') {
    apply plugin: 'war'
    apply plugin: 'jetty'
    dependencies {
        compile 'com.sun.jersey:jersey-server:1.11'
        compile 'com.sun.jersey:jersey-servlet:1.11'
        compile project(':template-client')
    }
}
