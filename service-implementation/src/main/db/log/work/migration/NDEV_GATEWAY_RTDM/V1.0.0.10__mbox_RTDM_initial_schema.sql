CREATE TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_EVENT
(
	PGUID CHAR(32) NOT NULL,
	NAME VARCHAR2(1024) NOT NULL,
	DATA VARCHAR2(2048) NOT NULL,
	CREATED_DATE TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP NOT NULL
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		PCTINCREASE 0
	)
	NOPARALLEL
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_EVENT ADD 
	CONSTRAINT PK_FSM_EVENT PRIMARY KEY (PGUID)
		USING INDEX
			TABLESPACE NDEV_GATEWAY_RTDM_TRNX
			STORAGE
			(
				PCTINCREASE 0
			)
;

CREATE TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_STATE
(
	PGUID CHAR(32) NOT NULL,
	EXECUTION_ID CHAR(32) NOT NULL,
	PROCESSOR_ID CHAR(32) NOT NULL,
	MAILBOX_ID CHAR(32) NOT NULL,
	PROCESSOR_NAME VARCHAR2(512) NOT NULL,
	PROCESSOR_TYPE VARCHAR2(128) NOT NULL,
	PROFILE_NAME VARCHAR2(128) NOT NULL,
	STATE_NOTES VARCHAR2(1024) NOT NULL,
	SLA_VERIFICATION_STATUS VARCHAR2(1024) NOT NULL
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		PCTINCREASE 0
	)
	NOPARALLEL
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_STATE ADD 
	CONSTRAINT PK_FSM_STATE PRIMARY KEY (PGUID)
		USING INDEX
			TABLESPACE NDEV_GATEWAY_RTDM_TRNX
			STORAGE
			(
				PCTINCREASE 0
			)
;

CREATE TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_STATE_VALUE
(
	PGUID CHAR(32) NOT NULL,
	FSM_STATE_GUID CHAR(32) NOT NULL,
	VALUE VARCHAR2(2048) CONSTRAINT NN03_FSM_STATE_VALUE NOT NULL,
	CREATED_DATE TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP CONSTRAINT NN04_FSM_STATE_VALUE NOT NULL
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
	NOPARALLEL
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_STATE_VALUE ADD 
	CONSTRAINT PK_FSM_STATE_VALUE PRIMARY KEY (PGUID)
		USING INDEX
			TABLESPACE NDEV_GATEWAY_RTDM_TRNX
			STORAGE
			(
				PCTINCREASE 0
			)
;

CREATE INDEX FK01_FSM_STATE_VALUE ON NDEV_GATEWAY_RTDM_OWNR.FSM_STATE_VALUE
(
	FSM_STATE_GUID
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
;

CREATE TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_LIST
(
	PGUID CHAR(32) CONSTRAINT NN01_FSM_TRANSITION_LIST NOT NULL,
	EVENT_GUID CHAR(32) CONSTRAINT NN02_FSM_TRANSITION_LIST NOT NULL,
	CREATED_DATE TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP CONSTRAINT NN03_FSM_TRANSITION_LIST NOT NULL
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
	NOPARALLEL
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_LIST ADD 
	CONSTRAINT PK_FSM_TRANSITION_LIST PRIMARY KEY (PGUID)
		USING INDEX
			TABLESPACE NDEV_GATEWAY_RTDM_TRNX
			STORAGE
			(
				INITIAL 1M
				NEXT 1M
				PCTINCREASE 0
			)
;

CREATE INDEX FK01_FSM_TRANSITION_LIST ON NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_LIST
(
	EVENT_GUID
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
;

CREATE TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_STATE
(
	PGUID CHAR(32) CONSTRAINT NN01_FSM_TRANSITION_STATE NOT NULL,
	STATE_VALUE_NEW_GUID CHAR(32) CONSTRAINT NN02_FSM_TRANSITION_STATE NOT NULL,
	STATE_VALUE_OLD_GUID CHAR(32) CONSTRAINT NN03_FSM_TRANSITION_STATE NOT NULL
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
	NOPARALLEL
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_STATE ADD 
	CONSTRAINT PK_FSM_TRANSITION_STATE PRIMARY KEY (PGUID)
		USING INDEX
			TABLESPACE NDEV_GATEWAY_RTDM_TRNX
			STORAGE
			(
				INITIAL 1M
				NEXT 1M
				PCTINCREASE 0
			)
;

CREATE INDEX FK01_FSM_TRANSITION_STATE ON NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_STATE
(
	STATE_VALUE_NEW_GUID
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
;

CREATE INDEX FK02_FSM_TRANSITION_STATE ON NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_STATE
(
	STATE_VALUE_OLD_GUID
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		INITIAL 1M
		NEXT 1M
		PCTINCREASE 0
	)
;

CREATE TABLE NDEV_GATEWAY_RTDM_OWNR.PROCESSOR_EXEC_STATE
(
	PGUID CHAR(32) CONSTRAINT NN01_PROCESSOR_EXEC_STATE NOT NULL,
	PROCESSOR_ID CHAR(32) CONSTRAINT NN02_PROCESSOR_EXEC_STATE NOT NULL,
	EXEC_STATUS VARCHAR2(128) CONSTRAINT NN03_PROCESSOR_EXEC_STATE NOT NULL
		CONSTRAINT CK01_PROCESSOR_EXEC_STATE CHECK (EXEC_STATUS IN ('READY', 'PROCESSING', 'FAILED', 'COMPLETED', 'QUEUED', 'STAGED', 'HANDED_TO_JS', 'INTERRUPTED', 'SKIPPED'))
)
	TABLESPACE NDEV_GATEWAY_RTDM_TRNX
	STORAGE
	(
		PCTINCREASE 0
	)
	NOPARALLEL
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.PROCESSOR_EXEC_STATE ADD 
	CONSTRAINT PK_PROCESSOR_EXEC_STATE PRIMARY KEY (PGUID)
		USING INDEX
			TABLESPACE NDEV_GATEWAY_RTDM_TRNX
			STORAGE
			(
				PCTINCREASE 0
			)
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_STATE_VALUE ADD 
	CONSTRAINT FK01_FSM_STATE_VALUE FOREIGN KEY (FSM_STATE_GUID)
		REFERENCES NDEV_GATEWAY_RTDM_OWNR.FSM_STATE (PGUID)
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_LIST ADD 
	CONSTRAINT FK01_FSM_TRANSITION_LIST FOREIGN KEY (EVENT_GUID)
		REFERENCES NDEV_GATEWAY_RTDM_OWNR.FSM_EVENT (PGUID)
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_STATE ADD 
	CONSTRAINT FK01_FSM_TRANSITION_STATE FOREIGN KEY (STATE_VALUE_NEW_GUID)
		REFERENCES NDEV_GATEWAY_RTDM_OWNR.FSM_STATE_VALUE (PGUID)
;

ALTER TABLE NDEV_GATEWAY_RTDM_OWNR.FSM_TRANSITION_STATE ADD 
	CONSTRAINT FK02_FSM_TRANSITION_STATE FOREIGN KEY (STATE_VALUE_OLD_GUID)
		REFERENCES NDEV_GATEWAY_RTDM_OWNR.FSM_STATE_VALUE (PGUID)
;

